<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashi Settings</title>
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header class="topbar">
  <h1>Settings</h1>
  <nav><a href="/">Dashboard</a></nav>
</header>
<main class="grid">
<section class="card">
  <h2>Telegram</h2>
  <form method="post" action="/settings/telegram" class="stack">
    <label>Bot Token <input type="password" name="token" value="{{.token}}"></label>
    <label>Chat ID <input name="chat_id" value="{{.chat_id}}"></label>
    <button type="submit">Save</button>
  </form>
  <form method="post" action="/api/alerts/test-telegram">
    <button type="submit">Send Test Alert</button>
  </form>
</section>
<section class="card">
  <h2>Alert Rules</h2>
  {{range .rules}}
  <form method="post" action="/settings/rules" class="inline">
    <input type="hidden" name="id" value="{{.ID}}">
    <strong>{{.Name}}</strong>
    <label>Threshold <input type="number" step="0.1" name="threshold" value="{{.Threshold}}"></label>
    <label>For (s) <input type="number" name="for_seconds" value="{{.ForSeconds}}"></label>
    <label>Cooldown (s) <input type="number" name="cooldown_seconds" value="{{.CooldownSeconds}}"></label>
    <label>Enabled <input type="checkbox" name="enabled" {{if .Enabled}}checked{{end}}></label>
    <button type="submit">Save</button>
  </form>
  {{end}}
</section>
</main>
</body>
</html>
